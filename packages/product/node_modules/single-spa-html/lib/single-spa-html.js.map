{"version":3,"sources":["../src/single-spa-html.js"],"names":["defaultOpts","template","domElementGetter","singleSpaHtml","opts","Error","trim","length","bootstrap","bind","mount","unmount","props","Promise","resolve","then","chooseDomElementGetter","domEl","innerHTML","domElement","defaultDomElementGetter","name","appName","htmlId","defaultDomEl","document","getElementById","createElement","id","body","appendChild"],"mappings":"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","sourcesContent":["const defaultOpts = {\n  template: \"\",\n  domElementGetter: null,\n};\n\nexport default function singleSpaHtml(opts) {\n  if (!opts) {\n    throw Error(`single-spa-html must be called with an opts object`);\n  }\n\n  opts = { ...defaultOpts, ...opts };\n\n  if (\n    (typeof opts.template !== \"string\" || opts.template.trim().length === 0) &&\n    typeof opts.template !== \"function\"\n  ) {\n    throw Error(\n      `single-spa-html must be passed a 'template' opt that is a non empty string or function`\n    );\n  }\n\n  if (opts.domElementGetter && typeof opts.domElementGetter !== \"function\") {\n    throw Error(\n      `single-spa-html was given 'opts.domElementGetter', but it isn't a function`\n    );\n  }\n\n  return {\n    bootstrap: bootstrap.bind(null, opts),\n    mount: mount.bind(null, opts),\n    unmount: unmount.bind(null, opts),\n  };\n}\n\nfunction bootstrap(opts, props) {\n  return Promise.resolve();\n}\n\nfunction mount(opts, props) {\n  return Promise.resolve(\n    typeof opts.template === \"function\" ? opts.template(props) : opts.template\n  ).then((template) => {\n    const domElementGetter = chooseDomElementGetter(opts, props);\n    const domEl = domElementGetter(props);\n    if (!domEl) {\n      throw Error(\n        `single-spa-html: domElementGetter did not return a valid dom element`\n      );\n    }\n    domEl.innerHTML = template;\n  });\n}\n\nfunction unmount(opts, props) {\n  return Promise.resolve().then(() => {\n    const domElementGetter = chooseDomElementGetter(opts, props);\n    const domEl = domElementGetter(props);\n    if (!domEl) {\n      throw Error(\n        `single-spa-html: domElementGetter did not return a valid dom element`\n      );\n    }\n    domEl.innerHTML = \"\";\n  });\n}\n\nfunction chooseDomElementGetter(opts, props) {\n  if (props.domElement) {\n    return () => props.domElement;\n  } else if (props.domElementGetter) {\n    return props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    return opts.domElementGetter;\n  } else {\n    return defaultDomElementGetter(props);\n  }\n}\n\nfunction defaultDomElementGetter(props) {\n  const name = props.appName || props.name;\n\n  if (!name) {\n    throw Error(\n      `single-spa-html was not given an application name as a prop, so it can't make a unique dom element container for the ht l application`\n    );\n  }\n  const htmlId = `single-spa-application:${name}`;\n\n  return function defaultDomEl() {\n    let domElement = document.getElementById(htmlId);\n    if (!domElement) {\n      domElement = document.createElement(\"div\");\n      domElement.id = htmlId;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n"],"file":"single-spa-html.js"}